---
- name: Clone the job_data repo
  git:
    repo: "{{ job_data_repo }}"
    dest: "{{ clone_job_data_repo_to }}"
    update: true
    clone: true

- name: Check the job_name dir exists
  stat:
    path: "{{ clone_job_data_repo_to }}/{{ job_data_repo_dest }}/{{ job_name }}"
  register: job_name_details

- name: Copy the job_data from the repo to the target
  copy:
    src: "{{ clone_job_data_repo_to }}/{{ job_data_repo_dest }}/{{ job_name }}/{{ item }}"
    dest: "{{ job_data_local }}"
  loop: "{{ job_data_files }}"
  when: job_name_details.stat.exists
